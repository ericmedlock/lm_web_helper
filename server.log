[Fri 09/26/2025 10:54:13.25] starting uvicorn 
INFO:     Started server process [37280]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:5055 (Press CTRL+C to quit)
INFO:     127.0.0.1:63169 - "POST /ask HTTP/1.1" 200 OK
INFO:     127.0.0.1:57023 - "POST /ask HTTP/1.1" 200 OK
INFO:     127.0.0.1:51189 - "POST /ask HTTP/1.1" 200 OK
INFO:     127.0.0.1:57780 - "POST /ask HTTP/1.1" 200 OK
INFO:     127.0.0.1:65118 - "POST /ask HTTP/1.1" 200 OK
INFO:     127.0.0.1:64384 - "POST /ask HTTP/1.1" 200 OK
[Fri 09/26/2025 11:57:27.16] starting uvicorn 
^C[Fri 09/26/2025 12:33:37.69] starting uvicorn 
INFO:     Started server process [11420]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:5055 (Press CTRL+C to quit)
[lm-web-helper 2025-09-26 12:33:44] Q: Smoke test: reply with the single word READY.
[lm-web-helper 2025-09-26 12:33:44] Searching: Smoke test: reply with the single word READY.
[lm-web-helper 2025-09-26 12:33:45] Found 3 results
[lm-web-helper 2025-09-26 12:33:59] Answer length: 172
INFO:     127.0.0.1:49978 - "POST /ask HTTP/1.1" 200 OK
^C[Fri 09/26/2025 14:09:40.13] starting uvicorn 
INFO:     Started server process [33504]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:5055 (Press CTRL+C to quit)
[Fri 09/26/2025 14:18:11.76] starting uvicorn 
INFO:     Started server process [34860]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:5055 (Press CTRL+C to quit)
[lm-web-helper 2025-09-26 14:18:45] Q: ping: return READY
[lm-web-helper 2025-09-26 14:18:45] Searching: ping: return READY
[lm-web-helper 2025-09-26 14:18:46] Found 3 results
INFO:     127.0.0.1:58792 - "POST /ask HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\lm_web_helper.py", line 12, in http_post_json
    with urllib.request.urlopen(req, timeout=60) as resp:
         ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\ericm\AppData\Local\Programs\Python\Python313\Lib\urllib\request.py", line 189, in urlopen
    return opener.open(url, data, timeout)
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ericm\AppData\Local\Programs\Python\Python313\Lib\urllib\request.py", line 489, in open
    response = self._open(req, data)
  File "C:\Users\ericm\AppData\Local\Programs\Python\Python313\Lib\urllib\request.py", line 506, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
                              '_open', req)
  File "C:\Users\ericm\AppData\Local\Programs\Python\Python313\Lib\urllib\request.py", line 466, in _call_chain
    result = func(*args)
  File "C:\Users\ericm\AppData\Local\Programs\Python\Python313\Lib\urllib\request.py", line 1348, in http_open
    return self.do_open(http.client.HTTPConnection, req)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ericm\AppData\Local\Programs\Python\Python313\Lib\urllib\request.py", line 1323, in do_open
    r = h.getresponse()
  File "C:\Users\ericm\AppData\Local\Programs\Python\Python313\Lib\http\client.py", line 1430, in getresponse
    response.begin()
    ~~~~~~~~~~~~~~^^
  File "C:\Users\ericm\AppData\Local\Programs\Python\Python313\Lib\http\client.py", line 331, in begin
    version, status, reason = self._read_status()
                              ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\ericm\AppData\Local\Programs\Python\Python313\Lib\http\client.py", line 292, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "C:\Users\ericm\AppData\Local\Programs\Python\Python313\Lib\socket.py", line 719, in readinto
    return self._sock.recv_into(b)
           ~~~~~~~~~~~~~~~~~~~~^^^
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\fastapi\applications.py", line 1082, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\starlette\applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\starlette\routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\starlette\routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\fastapi\routing.py", line 308, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\fastapi\routing.py", line 221, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\starlette\concurrency.py", line 38, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2485, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 976, in run
    result = context.run(func, *args)
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\server.py", line 15, in ask
    answer = chat_with_tools(q.question)
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\lm_web_helper.py", line 152, in chat_with_tools
    resp = http_post_json(f"{LM_BASE}/chat/completions", {
        "model": MODEL_ID,
        "messages": [{"role": "user", "content": prompt}]
    }, headers=headers)
  File "C:\Users\ericm\PycharmProjects\lm_web_helper\lm_web_helper.py", line 18, in http_post_json
    raise Exception(f"Request failed: {str(e)}")
Exception: Request failed: timed out
